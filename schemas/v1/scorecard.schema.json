{
  "$id": "https://trendmarket/schemas/v1/scorecard.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "version": "1.0.0",
  "type": "object",
  "required": [
    "sprint",
    "commit_sha",
    "started_at",
    "finished_at",
    "gates",
    "hashes",
    "slo_p95_ms",
    "gating"
  ],
  "properties": {
    "sprint": {"type": "string", "const": "Q2-S7"},
    "commit_sha": {"type": "string", "pattern": "^[a-f0-9]{40}$"},
    "started_at": {"type": "string", "format": "date-time"},
    "finished_at": {"type": "string", "format": "date-time"},
    "gates": {
      "type": "object",
      "required": ["T0", "T1", "T2", "T3", "T4", "T5", "T6", "T7", "T8"],
      "additionalProperties": true
    },
    "hashes": {
      "type": "object",
      "required": ["entries_hash", "root", "batch_sha256", "evidence_zip"],
      "properties": {
        "entries_hash": {"type": "string", "pattern": "^[a-f0-9]{64}$"},
        "root": {"type": "string", "pattern": "^[a-f0-9]{64}$"},
        "batch_sha256": {"type": "string", "pattern": "^[a-f0-9]{64}$"},
        "evidence_zip": {"type": "string", "pattern": "^[a-f0-9]{64}$"}
      },
      "additionalProperties": false
    },
    "slo_p95_ms": {
      "type": "object",
      "required": ["normalize", "build_batch", "merkle", "sign", "verify", "append_guard", "pack", "total"],
      "additionalProperties": true
    },
    "warnings_by_gate": {
      "type": "object",
      "additionalProperties": {"type": "integer", "minimum": 0}
    },
    "waivers_by_gate": {
      "type": "object",
      "additionalProperties": {
        "type": "array",
        "items": {"type": "string"}
      }
    },
    "slo_violations": {
      "type": "array",
      "items": {"type": "string"}
    },
    "gating": {
      "type": "object",
      "required": ["hard_fail", "warn_count"],
      "properties": {
        "hard_fail": {"type": "boolean"},
        "warn_count": {"type": "integer", "minimum": 0}
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}
