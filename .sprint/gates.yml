sprint_name: Q2-S7-Stabilize
gates:
  - id: T1
    name: YAML ok
    purpose: Lint YAML files
    ltl: 'G(valid_yaml)'
    contracts:
      require:
        - 'yamllint available'
      ensure:
        - 'exit code 0'
    run:
      - "bash -lc 'python3 -m pip install --user yamllint==1.35.1 >/dev/null 2>&1 || true; ~/.local/bin/yamllint . || yamllint .'"
    assert_patterns:
      - '.'
    evidence:
      - path: out/evidence/T1_yaml/yamllint.txt
        must_exist: false

  - id: T2
    name: Pins
    purpose: Check pinned actions
    ltl: 'G(pinned(actions))'
    contracts:
      require:
        - 'actions.lock present'
      ensure:
        - 'all actions pinned by sha'
    run:
      - "bash -lc 'python3 scripts/sprint_guard.py check-pins'"
    assert_patterns:
      - 'PINS:OK'
    evidence:
      - path: out/evidence/T2_pins/report.json
        must_exist: true

# retrigger 2025-10-31T20:31:21Z
